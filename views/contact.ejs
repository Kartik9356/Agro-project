<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
  </head>
  <body class="bg-white font-sans text-gray-800 flex flex-col min-h-screen">
    <%- include('partials/header') %>

    <div class="bg-gray-50 py-12 border-b border-gray-100">
      <div class="container mx-auto px-4 text-center">
        <h1 class="text-4xl font-extrabold text-gray-900 mb-2">Contact Us</h1>
        <p class="text-gray-500">
          We'd love to hear from you. Here is how you can reach us.
        </p>
      </div>
    </div>

    <section class="py-16">
      <div class="container mx-auto px-4">
        <div
          class="flex flex-col lg:flex-row gap-12 bg-white rounded-3xl overflow-hidden shadow-xl border border-gray-100"
        >
          <div
            class="lg:w-2/5 bg-[#2E7D32] text-white p-10 flex flex-col justify-between relative overflow-hidden"
          >
            <div
              class="absolute -top-10 -right-10 w-40 h-40 bg-white opacity-10 rounded-full"
            ></div>
            <div
              class="absolute bottom-10 left-10 w-20 h-20 bg-white opacity-10 rounded-full"
            ></div>

            <div>
              <h2 class="text-2xl font-bold mb-6">Get In Touch</h2>
              <p class="text-green-100 mb-8 leading-relaxed">
                Have questions about bulk orders or organic sourcing? Fill out
                the form and our team will get back to you within 24 hours.
              </p>

              <div class="space-y-6">
                <div class="flex items-start gap-4">
                  <div
                    class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0"
                  >
                    <i class="ph-fill ph-map-pin text-xl"></i>
                  </div>
                  <div>
                    <h5 class="font-bold text-lg">Visit Us</h5>
                    <p class="text-green-100 text-sm leading-relaxed">
                      <%= company.address %>
                    </p>
                  </div>
                </div>

                <div class="flex items-center gap-4">
                  <div
                    class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0"
                  >
                    <i class="ph-fill ph-phone text-xl"></i>
                  </div>
                  <div>
                    <h5 class="font-bold text-lg">Call Us</h5>
                    <p class="text-green-100 text-sm"><%= company.phone %></p>
                  </div>
                </div>

                <div class="flex items-center gap-4">
                  <div
                    class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0"
                  >
                    <i class="ph-fill ph-envelope text-xl"></i>
                  </div>
                  <div>
                    <h5 class="font-bold text-lg">Email Us</h5>
                    <p class="text-green-100 text-sm"><%= company.email %></p>
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-12 flex gap-4">
              <a
                href="#"
                class="w-10 h-10 rounded-full border border-white/30 flex items-center justify-center hover:bg-white hover:text-[#2E7D32] transition"
                ><i class="ph-fill ph-facebook-logo text-xl"></i
              ></a>
              <a
                href="#"
                class="w-10 h-10 rounded-full border border-white/30 flex items-center justify-center hover:bg-white hover:text-[#2E7D32] transition"
                ><i class="ph-fill ph-instagram-logo text-xl"></i
              ></a>
              <a
                href="#"
                class="w-10 h-10 rounded-full border border-white/30 flex items-center justify-center hover:bg-white hover:text-[#2E7D32] transition"
                ><i class="ph-fill ph-twitter-logo text-xl"></i
              ></a>
            </div>
          </div>

          <div class="lg:w-3/5 p-10 lg:p-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-6">
              Send us a Message
            </h2>

            <div
              class="bg-white p-8 md:p-10 rounded-2xl shadow-lg border border-gray-100"
            >
              <h3 class="text-2xl font-bold text-gray-900 mb-6">
                Send us a Message
              </h3>

              <div
                id="success-msg"
                class="hidden bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-6 flex items-center gap-2"
              >
                <i class="ph-fill ph-check-circle text-xl"></i>
                <span>Thank you! Your message has been sent.</span>
              </div>

              <div
                id="error-msg"
                class="hidden bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6 flex items-center gap-2"
              >
                <i class="ph-fill ph-warning-circle text-xl"></i>
                <span>Something went wrong. Please try again.</span>
              </div>

              <form id="contact-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label class="text-sm font-bold text-gray-700"
                      >Your Name <span class="text-red-500">*</span></label
                    >
                    <input
                      type="text"
                      name="name"
                      required
                      class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-[#4CAF50] focus:ring-1 focus:ring-[#4CAF50] transition"
                      placeholder="John Doe"
                    />
                  </div>
                  <div class="space-y-2">
                    <label class="text-sm font-bold text-gray-700"
                      >Phone Number <span class="text-red-500">*</span></label
                    >
                    <input
                      type="tel"
                      name="phone"
                      required
                      class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-[#4CAF50] focus:ring-1 focus:ring-[#4CAF50] transition"
                      placeholder="+91 98765 43210"
                    />
                  </div>
                </div>
                <!--  -->
                <div class="space-y-2">
                  <label class="text-sm font-bold text-gray-700"
                    >Your Email <span class="text-red-500">*</span></label
                  >
                  <input
                    type="email"
                    name="email"
                    required
                    class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-[#4CAF50] focus:ring-1 focus:ring-[#4CAF50] transition"
                    placeholder="john@example.com"
                  />
                </div>

                <div class="space-y-2">
                  <label class="text-sm font-bold text-gray-700"
                    >Message <span class="text-red-500">*</span></label
                  >
                  <textarea
                    name="message"
                    required
                    rows="5"
                    class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:border-[#4CAF50] focus:ring-1 focus:ring-[#4CAF50] transition"
                    placeholder="How can we help you?"
                  ></textarea>
                </div>

                <button
                  type="submit"
                  id="submit-btn"
                  class="w-full bg-[#D32F2F] hover:bg-[#B71C1C] text-white font-bold py-4 rounded-lg shadow-md uppercase tracking-wide transition transform active:scale-95 flex items-center justify-center gap-2"
                >
                  <span>Send Message</span>
                  <i class="ph-bold ph-paper-plane-right"></i>
                </button>
              </form>
            </div>

            <script>
              document
                .getElementById("contact-form")
                .addEventListener("submit", function (e) {
                  e.preventDefault(); // Stop page reload

                  const btn = document.getElementById("submit-btn");
                  const successMsg = document.getElementById("success-msg");
                  const errorMsg = document.getElementById("error-msg");

                  // 1. Change Button State
                  const originalText = btn.innerHTML;
                  btn.innerHTML =
                    '<i class="ph ph-spinner animate-spin text-xl"></i> Sending...';
                  btn.disabled = true;
                  btn.classList.add("opacity-75");

                  // 2. Gather Data
                  const formData = {
                    name: this.name.value,
                    email: this.email.value,
                    phone: this.phone.value,
                    message: this.message.value,
                  };

                  // 3. Send to Server
                  fetch("/contact-submit", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formData),
                  })
                    .then((response) => response.json())
                    .then((data) => {
                      if (data.success) {
                        // Show Success
                        successMsg.classList.remove("hidden");
                        errorMsg.classList.add("hidden");
                        this.reset(); // Clear form
                      } else {
                        throw new Error("Server error");
                      }
                    })
                    .catch((err) => {
                      // Show Error
                      console.error(err);
                      errorMsg.classList.remove("hidden");
                      successMsg.classList.add("hidden");
                    })
                    .finally(() => {
                      // Reset Button
                      btn.innerHTML = originalText;
                      btn.disabled = false;
                      btn.classList.remove("opacity-75");

                      // Hide success message after 5 seconds
                      setTimeout(() => {
                        successMsg.classList.add("hidden");
                      }, 5000);
                    });
                });
            </script>
          </div>
        </div>
      </div>
    </section>

    <%- include('partials/footer') %>
  </body>
</html>
